%%%%%%%%%%%%%%%%%%%%%%% file rtree.tex %%%%%%%%%%%%%%%%%%%%%%
% Erweiterungen des R-Baums f√ºr r√§umliche Datenbankanfragen %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\documentclass[runningheads,a4paper]{llncs}

\usepackage{amssymb}
\setcounter{tocdepth}{2}
\usepackage{graphicx}
\graphicspath{ {./img/} }           % change graphics include path to ./img/

\usepackage[english, ngerman]{babel}
\usepackage[utf8]{inputenc}			    % for working umlaute
\usepackage[T1]{fontenc}            % wichtig f√ºr Trennung von W√∂rtern mit Umlauten
\usepackage{microtype}						  % verbesserter Randausgleich
\usepackage{pdfpages}
\usepackage{lmodern}		%fuer schoenen Text in pdf-Abbildungen

\usepackage{quoting}
\usepackage[
	babel,
	german=quotes,
	threshold=2,										% two lines ore more triggers a blockquote
	thresholdtype=lines
]{csquotes}
% \SetBlockEnvironment{quoting}			% real block quotes
\renewcommand\mkblockquote[4]{\leavevmode\llap{‚Äû}#1#2#3‚Äú#4}			% block quotes with german quotation marks

% quellen mangement
\usepackage[
	backend=biber,
	natbib=true,								% damit \citep{} etc. verwendet werden k√∂nnen
	style=authoryear-icomp,    	% Zitierstil
	isbn=false,                	% ISBN nicht anzeigen, gleiches geht mit nahezu allen anderen Feldern
	pagetracker=true,          	% ebd. bei wiederholten Angaben (false=ausgeschaltet, page=Seite, spread=Doppelseite, true=automatisch)
	maxbibnames=10,            	% maximale Namen, die im Literaturverzeichnis angezeigt werden
	maxcitenames=2,            	% maximale Namen, die im Text angezeigt werden, ab 2 wird u.a. nach den ersten Autor angezeigt
	autocite=inline,           	% regelt Aussehen f√ºr \autocite (inline=\parancite)
	block=space,               	% kleiner horizontaler Platz zwischen den Feldern
	backref=true,              	% Seiten anzeigen, auf denen die Referenz vorkommt
	backrefstyle=three+,       	% fasst Seiten zusammen, z.B. S. 2f, 6ff, 7-10
	date=short									% Datumsformat
]{biblatex}
\setlength{\bibitemsep}{0.6em}     	% Abstand zwischen den Literaturangaben
\setlength{\bibhang}{2em}        		% Einzug nach jeweils erster Zeile
% \renewcommand{\postnotedelim}{\addcolon\addspace}			% Doppelpunkt statt Komma vor der Seitenangabe in der Zitierung
% \DeclareFieldFormat{postnote}{#1}											% Kein einleitendes ¬´S.¬ª vor der Seitenangabe in der Zitierung

\bibliography{_literatur}

\usepackage[]{acronym}																% f√ºr Abk√ºrzungen

\usepackage{hyperref}																	% for hyperlink references
\usepackage[ngerman, nameinlink]{cleveref}						% for naming references

\addto\extrasngerman{\def\figureautorefname{Abb.}}		% changes figure reference text to "Abb."

\usepackage{float}							        							% for use of "H" specifier in floats
\usepackage[section]{placeins}          							% keep floats (images, tables, ..) in their place

% change symbols for unordered lists (itemize)
\renewcommand{\labelitemi}{$\bullet$}
\renewcommand{\labelitemii}{$\circ$}


\begin{document}

\mainmatter  % start of an individual contribution

% first the title is needed
\title{Erweiterungen des R-Baums f√ºr r√§umliche Datenbankanfragen}

\subtitle{Der R*-Baum}

% a short form should be given in case it is too long for the running head
% \titlerunning{Verschiebungsalgorithmen f√ºr Kartenbeschriftungen}

\author{Patrick Schulz \& Simon H√∂tten}

% the affiliations are given next; don't give your e-mail address
% unless you accept that it will be published
\institute{Seminar Geodatenbanken \\ Dozent: Prof. Dr.-Ing. Jan-Henrik Haunert \\ Institut f√ºr Geoinformatik und Fernerkundung\\ Universit√§t Osnabr√ºck \\ Sommersemester 2015}

%\toctitle{Titel vom Inhaltsverzeichnis}
%\tocauthor{Authors' Instructions}
\maketitle


% Zusammenfassung
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \begin{abstract}

\keywords{Geodatenbanken, R*, Spatial Access, Index, R-Tree}
% \end{abstract}


% Inhaltsverzeichnis
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \tableofcontents
% \newpage


% Dokument
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Motivation} % (fold)
\label{sec:intro}

	Herk√∂mmliche eindimensionale Indexstrukturen bieten keine M√∂glichkeiten, mehrdimensionale r√§umliche Daten effizient zu durchsuchen. Die Reduzierung auf Punkte, um Objekte mit \ac{PAM} abzufragen, ist mit gewissen Einbu√üen m√∂glich, aber insbesondere f√ºr komplexere Anfragen unzureichend.
	Der 1984 von Guttman entwickelte R-Baum \citep{Guttman:1984} versucht dieses Problem zu l√∂sen, in dem der Index direkt auf den r√§umlichen Eigenschaften basiert. Mittlerweile existieren unz√§hlige Varianten und Verwandte des R-Baums, dessen Einsatzgebiet weit √ºber die klassische Geoinformatik hinaus geht.

	Eine dieser Varianten ist der R*-Baum, welcher die (teils unbegr√ºndeten) Annahmen in der urspr√ºnglichen Ver√∂ffentlichung hinterfragt und so die Datenstruktur weiter optimiert. Im Folgenden gehen wir auf die Verfahren und Eigenheiten des regul√§ren R-, als auch des R*-Baums ein, stellen allgemeine Optimierungskriterien auf und schlie√üen mit einem Vergleich.

	Im Prinzip ist der R*-Baum f√ºr n-dimensionale Daten geeignet. Diese Arbeit beschr√§nkt sich allerdings auf Geodaten, insbesondere sind alle Beispiele im zwei dimensionalen Raum. Hier liegt auch das Haupteinsatzgebiet von R*-B√§umen. F√ºr h√∂her-dimensionale Daten sind andere Indexstrukturen, wie der X-Baum, zu bevorzugen \citep[vgl.][28-29]{Kriegel:1996}.

% section intro (end)

\section{Prinzipien eines R-Baums} % (fold)
\label{sec:prinzipien_eines_r_baums}

Der R-Baum ist eine raeumliche Indexstruktur fuer die effiziente Bereichsabfragen von Geometrien im zweidimensionalen Raum. Der R-Baum teilt in jeder Ebene seiner Struktur die beinhalteten Geometrien in Partitionen auf. Die Gesamtheit der Geometrien einer Partitionen werden durch minimal umschlieszende Rechtecke (kurz \acs{MBR}) repraesentiert. Innerhalb einer Partition werden die Geoemtrien in weitere Partitionen unterteilt, bis die Anzahl der Geometrien den Schwellwert \acs{M} innerhalb einer Partition nicht mehr ueberschreitet. Der Vorteil von dieser Strukturierung sorgt daf¸r, dass bei Bereichabfragen - zB. Was befindet sich in der Umgebung von Polygon p? - nicht zwingend alle Geometrien in der Ebene betrachtet werden m¸ssen: Wenn in \Cref{fig:beispiel-r-tree} 
\begin{figure}[H]
		\begin{center}
		\includegraphics[width=1.0\textwidth ]{001_Beispiel_R-Tree.pdf}
		\caption{Beispiel fuer einen R-Baum. (\acs{M}=3, \acs{m}=2)}
		\label{fig:beispiel-r-tree}
		\end{center}
	\end{figure}

% section prinzipien_eines_r_baums (end)

\section{Optimierungskriterien} % (fold)
\label{sec:optimierungskriterien}

	Bei dem herk√∂mmlichen R-Baum wird, sowohl beim Hinzuf√ºgen neuer Elemente als auch beim Split, lediglich die Fl√§che der umschlie√üenden Rechtecke minimiert \citep[vgl.][50-51]{Guttman:1984}. Einige der daraus resultierenden Probleme wurden bereits im vorherigen Abschnitt dargelegt.
	Im Folgenden werden weitere m√∂gliche Optimierungen und ihre Wechselwirkungen aufgef√ºhrt. Ein R-Baum muss mit unterschiedlichen Geometrien und Anfragen umgehen k√∂nnen, daher wirken sich einige Kriterien in einigen Situationen st√§rker aus als andere.

	\subsubsection{Fl√§chenausnutzung maximieren} % (fold)
	\label{ssub:flaechenausnutzung}

	Die Fl√§che, welche von dem umschlie√üenden Rechteck, aber nicht von den in ihm enthaltenen Rechtecken, √ºberdeckt wird, soll minimiert werden. Es soll also m√∂glichst wenig Platz \enquote{verschwendet} werden. \citep[vgl.][323]{Beckmann:1990}

	% subsubsection flaechenausnutzung (end)

	\subsubsection{√úberlappung minimieren} % (fold)
	\label{ssub:ueberlappung_minimieren}

	Die √úberlappung der umschlie√üenden Rechtecke soll minimiert werden. Dadurch m√ºssen ebenfalls weniger Pfade im Baum traversiert werden. Liegt ein angefragter Punkt beispielsweise in einer Region, in der sich viele Rechtecke √ºberschneiden, m√ºssen alle M√∂glichkeiten weiter verfolgt werden, was zu erh√∂htem Rechenaufwand f√ºhrt.
	
	% subsubsection ueberlappung_minimieren (end)

	\subsubsection{Summe der Kantenl√§nge minimieren} % (fold)
	\label{ssub:kantenlaenge}

	Die Summe der Kantenl√§nge der Verzeichnisrechtecke (\emph{\enquote{margin}}) soll m√∂glichst klein sein. Quadrate werden also bevorzugt. Da Quadrate auf den jeweils h√∂heren Ebenen im Baum besser zusammengefasst werden k√∂nnen, reduziert sich so die ben√∂tigte Fl√§che.
	Au√üerdem profitieren Anfragen mit gro√üen, quadratischen Elementen von dieser Optimierung. \citep[vgl.][323]{Beckmann:1990}
	
	% subsubsection kantenlaenge (end)

	\subsubsection{Speichernutzung maximieren} % (fold)
	\label{ssub:speichernutzung_maximieren}

	Eine geringe H√∂he des Baumes wirkt sich positiv auf die Kosten einer Abfrage aus. Das kann durch eine m√∂glichst gleichm√§√üige Verteilung der Blattknoten erreicht werden. Insbesondere f√ºr gro√üe Abfragerechtecke ist dies relevant, da hier, auch abgesehen von den ersten drei genannten Optimierungen, mehrere Pfade traversiert werden m√ºssen. \citep[vgl.][323-324]{Beckmann:1990}
	
	% subsubsection speichernutzung_maximieren (end)

	\subsubsection{Wechselwirkungen} % (fold)
	\label{ssub:wechselwirkungen}

	Um die Fl√§chenausnutzung zu maximieren und die √úberlappung zu minimieren, bedarf es einer gr√∂√üeren Freiheit bei der Wahl der Formen und der Anzahl an Rechtecken pro Knoten. Die Kriterien stehen also in Konkurrenz mit einer geringen Kantenl√§nge und hohen Speicherausnutzung. Auf der anderen Seite k√∂nnen quadratischere Rechtecke besser zusammengefasst werden, was sich wiederum positiv auf die Speichernutzung auswirkt. \citep[vgl.][323-324]{Beckmann:1990}
	
	% subsubsection wechselwirkungen (end)

% section optimierungskriterien (end)

\section{Der R*-Baum} % (fold)
\label{sec:rstar_tree}



% section rstar_tree (end)

\section{Fazit} % (fold)
\label{sec:fazit}

	Zun√§chst l√§sst sich festhalten, dass der R*-Baum alle vorgestellten Optimierungskriterien ber√ºcksichtigt. Das hat einen etwas erh√∂hten Implementierungsaufwand gegen√ºber herk√∂mmlichen R-B√§umen zur Folge.

	\begin{figure}[H]
		\centering
		\includegraphics[width=1\textwidth]{vergleich-quad-star.png}
		\caption{Quadratischer- (links) und R*-Split (rechts) im Vergleich. (Bildquelle: \url{https://github.com/davidmoten/rtree})}
		\label{fig:vergleich-quad-star}
	\end{figure}

	Der R*-Baum betreibt sehr hohen Aufwand beim Hinzuf√ºgen und L√∂schen von Elementen, um eine gute Struktur zu bewahren. \Cref{fig:vergleich-quad-star} zeigt den gleichen Datensatz (mit gleicher Einf√ºgereihenfolge), aber unterschiedlichen Split-Verfahren. Das Beispiel zeigt, wie positiv sich der Mehraufwand auswirkt. Mit R*-Split √ºberschneiden sich die Verzeichnisrechtecke deutlich weniger, was schnellere Abfragen erm√∂glicht.

	\subsubsection{Benchmarks} % (fold)
	\label{ssub:benchmarks}
	
	% subsubsection benchmarks (end)

	\subsubsection{Weiterentwicklungen} % (fold)
	\label{ssub:weiterentwicklungen}

	Die Effizienz des R*-Baums nimmt ab f√ºnf Dimensionen rapide ab \citep[vgl][29]{Kriegel:2008}. Um auch h√∂her dimensionalen Daten gerecht zu werden, existieren daher zahlreiche Weiterentwicklung. Dazu geh√∂rt, wie eingangs erw√§hnt, der X-Baum, welcher darauf ausgelegt ist auch in h√∂heren Dimensionen √úberlappungen zu vermeiden \citep[vgl.]{Kriegel:1996}.
	Andere Indizes bilden N√§herungen der tats√§chlichen Daten und f√ºhren Anfragen zun√§chst auf diesen aus (\emph{\enquote{Vector Approximation}}, siehe \cite{Gibas:2008} oder \cite{Daoudi:2008}).
	
	% subsubsection weiterentwicklungen (end)

% section fazit (end)



% Anhang
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newpage
\begin{appendix}

	\section*{Anhang}
	\addcontentsline{toc}{section}{Anhang}

	\section*{Abk√ºrzungsverzeichnis} % (fold)
	\label{sub:abbreviations}

		\begin{acronym}[length]
		\acro{m}{Variable: minimale Anzahl der Geometrien in einer Partition}
		\acro{M}{Variable: maximale Anzahl der Geometrien in einer Partition}
		\acro{MBR}{Minimum bounding Rectangle}
	    \acro{SAM}{Spatial access methods}
	    \acro{PAM}{Point access methods}
	  \end{acronym}

	% section abbreviations (end)

	% Abbildungsverzeichnis
	% \listoffigures

	% Literaturverzeichnis
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%b
	\nocite{*}							% include all bibtex entries from bibliography, even if they are not citied in the document

	\printbibliography

\end{appendix}

\end{document}
